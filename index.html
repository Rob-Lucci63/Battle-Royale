<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>بازی ۱۱ کارت</title>
<style>
  body{margin:0;background:#0b1020;display:flex;justify-content:center;align-items:center;height:100vh;font-family:tahoma;color:#fff;}
  canvas{background:#1b1f2b;border:2px solid #fff;border-radius:12px;}
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const cardWidth = 60, cardHeight = 90;

// کارت‌ها روی میز و دست بازیکن
let tableCards = [];
let playerHand = [];
let botHand = [];

// ایجاد کارت‌ها (1 تا 10)
function createDeck() {
  let deck = [];
  for(let i=1;i<=10;i++){
    for(let j=0;j<4;j++) deck.push(i);
  }
  return shuffle(deck);
}

// شافل
function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    let j = Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

let deck = createDeck();

// پخش کارت‌ها
function dealCards(){
  playerHand = deck.splice(0,5);
  botHand = deck.splice(0,5);
  tableCards = deck.splice(0,4); // 4 کارت روی میز
}
dealCards();

// کارت رو رسم کن
function drawCard(x,y,val){
  ctx.fillStyle='#fff';
  ctx.fillRect(x,y,cardWidth,cardHeight);
  ctx.fillStyle='#000';
  ctx.font='20px Tahoma';
  ctx.fillText(val,x+cardWidth/2-6,y+cardHeight/2+8);
}

// رندر کل
function render(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // میز
  ctx.fillStyle='rgba(255,255,255,0.1)';
  ctx.fillRect(50,50,300,200);
  ctx.fillStyle='#fff';
  ctx.fillText('میز',180,45);

  // کارت‌های میز
  tableCards.forEach((c,i)=>{
    drawCard(70+i*80,80,c);
  });

  // دست بازیکن
  ctx.fillStyle='rgba(255,255,255,0.1)';
  ctx.fillRect(50,300,300,200);
  ctx.fillStyle='#fff';
  ctx.fillText('دست شما',160,295);
  playerHand.forEach((c,i)=>{
    drawCard(70+i*70,330,c);
  });
}

render();

// انتخاب کارت با کلیک
canvas.addEventListener('click', (e)=>{
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  // بررسی کارت‌های دست بازیکن
  playerHand.forEach((c,i)=>{
    const x = 70+i*70, y = 330;
    if(mx>x && mx<x+cardWidth && my>y && my<y+cardHeight){
      // جمع با کارت‌های میز
      tableCards.forEach((tc,ti)=>{
        if(c + tc === 11){
          alert('مجموع ۱۱ ساخته شد! کارت‌ها حذف میشن.');
          playerHand.splice(i,1);
          tableCards.splice(ti,1);
          render();
        }
      });
    }
  });
});
</script>
</body>
</html>